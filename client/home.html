

<template name="top_banner">
  <div class="home-top {{#if border}}{{border}}{{/if}}">
    <div class="top-row">
      {{> logo_title}}
    </div>
    {{#if showFilters}}
      <div class="filter-row">

        <!--<div class="filter">-->
          <!--{{> filters}}-->
          <!--&lt;!&ndash;{{> filters}} in {{> categories}}&ndash;&gt;-->
        <!--</div>-->
        <div class="tabs">
          <ul>
            <li class="{{#if showBestStreams}}selected{{/if}}"><button class="show-best-streams">BEST OF</button></li>
            <li class="{{#if showMostRecentStreams}}selected{{/if}}"><button class="show-most-recent-streams">MOST RECENT</button></li>
          </ul>
        </div>
        <div class="stream-search">
          <form class="stream-search-form">
            <label for="stream-search-input">

              <div class="stream-search-icon">
                  {{> search_icon}}
              </div>
            </label>

            <input id="stream-search-input" type="search"/>
          </form>
        </div>
      </div>
    {{/if}}
    {{> banner_buttons}}
  </div>
  {{> signin_overlay}}
</template>

<template name="signin_overlay">
  {{#if signingIn}}
    <div class="signin-overlay" style="width: {{windowWidth}}px; height: {{windowHeight}}px;">
      <button class="close">{{> close_circle}}</button>

      {{> login_form}}
      <!--<div class="signin-buttons">-->
        <!--<ol class="user-menu">-->
          <!--<li>-->
            <!--<button class="twitter-signin">Log in with Twitter</button>-->
          <!--</li>-->
          <!--<li>-->
            <!--<button class="email-signin">Log in with email</button>-->
          <!--</li>-->
        <!--</ol>-->
      <!--</div>-->
    </div>
  {{/if}}
</template>

<template name="top_banner_simple_no_links">
  <div class="home-top remix-color not-sticky">
    <div class="top-row">
      <div class="logo-title">
        <div class="logo">
          {{> deepstream_logo}}
        </div>
          <div class="title">
            <div class="name">DEEP STREAM</div>
            <div class="slogan">Turn livestreams into something deeper</div>

            <!--<img src="{{c.url 'static/FOLD_TITLE.svg'}}">-->
          </div>
      </div>
    </div>
  </div>
</template>

<template name="top_banner_simple">
  <div class="home-top">
    <div class="top-row">
      {{> logo_title}}
    </div>
  </div>
</template>

<template name="banner_buttons">
  <div class="right">
    <div class="action-items">
      <ol>
        {{#unless isPhone}}
          <li class="about-deepstream">
            <!--<a href="/about">-->
            <a href="javascript:void(0)">
              <button>
                <span class="text">About</span>

              </button>
            </a>
          </li>
        {{/unless}}
        {{> login_buttons }}
        {{#unless isPhone}}
          <li class="create-deepstream">
            {{> create_deepstream}}
          </li>
        {{/unless}}

      </ol>
    </div>

  </div>
</template>

<template name="login_buttons">
  <li class="user-action">

    {{#if currentUser}}
      <!--<a href="/profile/{{currentUser.displayUsername}}">-->
      <a href="javascript:void(0)">

        <button>
            {{#if profileImage currentUser}}
              <img class="profile-picture" src="{{profileImage currentUser}}"/>
            {{/if}}
          <span class="text">{{currentUser.profile.name}}</span>
        </button>
      </a>
      {{#if showUserInfo}}
        <ol class="user-menu">
          <li>
            <a href="/my_streams"><button>My streams</button></a>
          </li>
          <li>
            <button class="logout">Logout</button>
          </li>
        </ol>
      {{/if}}
    {{else}}
      <button class="signin"> Log in / Sign up</button>
    {{/if}}
  </li>
</template>



<template name="filters">
  <span class="filters">
    <select data-custom-id="custom" data-custom-class="custom" value="{{initialFilterValue}}">
      {{#each filters}}
        <option value="{{this}}" {{conditionallySelected}}>
          {{this}}
        </option>
      {{/each}}
    </select>
  </span>
</template>

<template name="categories">
  <span class="categories">
    <select>
      {{#each categories}}
        <option class="category {{#if selected}}selected{{/if}}" data-category="{{this}}">
          {{this}}
        </option>
      {{/each}}
    </select>
  </span>
</template>

<template name="all_stories">
  {{#each stories}}
    {{> story_preview }}
  {{/each}}
  <div class="home-loading-footer">
    {{#if storiesLoading}}
      {{> loading_icon}}
    {{else}}
      {{#if moreToShow}}
        <button class="show-more">Show more</button>
      {{/if}}
    {{/if}}
  </div>

</template>

<template name="story_preview">
  {{#with story}}
    <div class="story" data-story-id="{{_id}}">
      {{> _story_preview_content}}
      {{> edit_or_read_bar}}
    </div>
  {{/with}}
</template>

<template name="_story_preview_content">
  {{#with story}}
    <div class="context-count">
      {{#if contextCountOfType 'video'}}
        <div class="context-count-icon">
          {{> video_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'video'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'image'}}
        <div class="context-count-icon">
          {{> image_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'image'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'gif'}}
        <div class="context-count-icon">
          {{> gif_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'gif'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'map'}}
        <div class="context-count-icon">
          {{> map_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'map'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'twitter'}}
        <div class="context-count-icon">
          {{> twitter_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'twitter'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'audio'}}
        <div class="context-count-icon">
          {{> audio_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'audio'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'viz'}}
        <div class="context-count-icon">
          {{> viz_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'viz'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'text'}}
        <div class="context-count-icon">
          {{> text_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'text'}}
          </div>
        </div>
      {{/if}}
      {{#if contextCountOfType 'link'}}
        <div class="context-count-icon">
          {{> link_icon }}
          <div class="context-count-text">
            {{contextCountOfType 'link'}}
          </div>
        </div>
      {{/if}}
      <!--TODO - add remix check-->
    </div>

    <a href="story_url_here">
      <div class="overlay-image">
        {{#with headerImageVideoObject 'small'}}
          {{> looping_video}}
        {{else}}
          <img src="{{headerImageUrl 'small'}}" />
        {{/with}}
      </div>

    </a>

    <a href="story_url_here">
      <div class="story-card">
      </div>

    </a>

    <a href="story_url_here">
      <div class="headline">
        {{title}}
      </div>
    </a>

    <div class="byline">
      <a class="author-profile-link" href="{{profileUrl}}">
        <div class="pull-left">
          <div class="author-image">
            {{#if profileImage author}}
             <img class="profile-picture" src="{{profileImage author}}"/>
            {{else}}
              <img class="profile-picture" src="{{c.url 'static/placeholder_image.png'}}"/>
            {{/if}}
          </div>

          <div class="author-name-date">
            <div class="author-name">By <span>{{authorName}}</span></div>
            <div class="publish-date">{{lastPublishDate}}</div>
          </div>
        </div>
      </a>

      <div class="pull-right">
        {{> favorite_button }}
        {{#if currentUser.admin}}
          {{> editors_pick_button }}
        {{/if}}
      </div>
    </div>
  {{/with}}

</template>

<template name="edit_or_read_bar">
  <div class="edit-or-read">

  </div>
</template>



<!--DEEPSTREAM-->

<template name="home">
  {{> top_banner showFilters="true"}}
  <div class="deepstreams-and-streams">
    <div class="stream-type-selector-container">

      <div class="stream-type-selector">
          <ul>
            <li class="{{#if showDeepstreamsOnly}}selected{{/if}}">
              <button class="show-deepstreams-only">DEEPSTREAMS</button>
            </li><li class="{{#if showDeepstreamsAndLivestreams}}selected{{/if}}">
              <button class="show-deepstreams-and-livestreams">BOTH</button>
            </li><li class="{{#if showLivestreamsOnly}}selected{{/if}}">
              <button class="show-livestreams-only">LIVESTREAMS</button>
            </li>
          </ul>
      </div>
    </div>
    {{#if showDeepstreams}}
      <div class="deepstreams-container">
        <h2>DEEPSTREAMS</h2>
        <h3>Deepstreams are livestreams that people have enhanced with great content like images, tweets, and news stories.</h3>
        {{> deepstreams}}
      </div>
    {{/if}}
    {{#if showLivestreams}}
      <div class="streams-container">
        <h2>LIVESTREAMS</h2>
        {{#if loadingStreamResults}}
          Loading...
        {{/if}}
        {{#if noMoreStreamResults}}
          {{noMoreStreamResults}}
        {{/if}}
        {{> streams}}
      </div>
    {{/if}}
  </div>
</template>

<template name="logo_title">
  <div class="logo-title">
    <a href="/">
      <div class="logo">
        {{> deepstream_logo}}
      </div>
    </a>
    <a href="/">
      <div class="title">
        <div class="name">DEEP STREAM</div>
        <div class="slogan">Turn livestreams into something deeper</div>

        <!--<img src="{{c.url 'static/FOLD_TITLE.svg'}}">-->
      </div>
    </a>
  </div>
</template>

<template name="deepstreams">
  {{#each streams}}
    {{> deepstream_preview deepstream=this}}
  {{else}}
    {{#if subsReady}}
      No results found.
    {{/if}}
  {{/each}}
</template>

<template name="streams">
  {{#each streams}}
    {{> stream_preview }}
  {{/each}}
</template>

<template name="my_streams">
  <h1>Your Deep Streams</h1>
  {{#each streams}}
      {{> deepstream_preview linkToCurate=true deepstream=this }}
  {{/each}}
</template>

<template name="deepstream_preview">
  {{#with deepstream}}
  <div class="deepstream-preview">
    <div class="deepstream">
      <div class="image-and-content">
        <a href="{{linkPath}}">
          <div class="stream-image">
            <img src="{{previewUrl}}"/>
            {{> play_video_icon}}
          </div>
          <div class="live-indicator">LIVE</div>
        </a>
        <div class="content">
          <div class="content-preview-icons content-icons">
            <ol>
              {{#if hasContextOfType "news"}}
                <li>
                  <button class='news-button {{#if previewTypeIs "news"}}active{{/if}}'>
                    {{> news_icon }}
                  </button>
                </li>
              {{/if}}
              {{#if hasContextOfType "twitter"}}
                <li>
                  <button class='twitter-button {{#if previewTypeIs "twitter"}}active{{/if}}'>
                    {{> twitter_icon }}
                  </button>
                </li>
              {{/if}}
              {{#if hasContextOfType "text"}}
                <li>
                  <button class='text-button {{#if previewTypeIs "text"}}active{{/if}}'>
                    {{> text_icon }}
                  </button>
                </li>
              {{/if}}
            </ol>
          </div>
          {{#with contentPreview}}
            {{> homepage_content_preview}}
          {{/with}}
        </div>
      </div>
      <a href="{{linkPath}}">
        <div class="title-and-views">
          <span class="title">{{title}}</span>
          <span class="views">3,730 Views</span>
        </div>
        <div class="small-stream-info">
          <div>
            <span class="stream-count">Tracking {{streams.length}} streamers</span>
            <span class="favorited">3 {{> favorite_icon}}</span>
          </div>
          <div>
            <span class="date">Updated {{dateInPast savedAt}}</span>
            <span class="curator-name">{{curatorName}}</span>
          </div>

        </div>
      </a>
    </div>
  </div>
  {{/with}}
</template>

<template name="homepage_content_preview">
  <div class="homepage-content-preview">
    {{#if isContextOfType "news"}}
      {{> homepage_preview_news_section}}
    {{/if}}
    {{#if isContextOfType "twitter"}}
      {{> homepage_preview_twitter_section}}
    {{/if}}
    {{#if isContextOfType "text"}}
      {{> homepage_preview_text_section}}
    {{/if}}
  </div>
</template>


<template name="stream_preview">
  <div class="stream-preview">
    <button class="show-preview-overlay">
      <div class="stream">
        <div class="stream-image">
          <img src="{{thumbnailUrl}}"/>
          {{> play_video_icon}}
        </div>
        <div class="existing-deepstreams-message">0 deepstreams have been made from this</div>
        <div class="title">{{title}}</div>
        <div class="small-stream-info">
          <div class="username">{{username}}</div>
          <div class="views">{{totalViews}} Views</div>
        </div>
      </div>
    </button>
    {{#if showPreviewOverlay}}
      {{debugContext}}
      <div class="stream-preview-screen-overlay" style="width: {{windowWidth}}px; height: {{windowHeight}}px;">
        <button class="close">{{> close_circle}}</button>
        <div class="preview-box">
          <div class="text-prompt">Click CREATE and add some content to start DeepStreaming this livestream</div>
          <div class="main-stream">
            <div class="main-stream-iframe-holder">
              <iframe id="{{mainStreamElementId}}" class="main-stream-iframe" src="{{autoplayUrl}}" frameborder="0"
                      allowfullscreen></iframe>
            </div>
          </div>
          <div class="right-section">
            {{> content_icons showAll="true"}}
            <div class="text">Add great content like news stories, pictures, tweets and more to this livestream</div>
            {{> create_deepstream}}
            <div class="text">After you add content you'll have the option to publish your page and start DeepStreaming</div>
          </div>
          <div class="video-info">
            <div class="title">{{title}}</div>
            <div class="description">{{description}}</div>
            <div class="username">{{username}}</div>
            <div class="date">{{createdAtString}}</div>
          </div>
        </div>
      </div>
    {{/if}}
  </div>
</template>


<template name="create_deepstream">
  <button class="create-deepstream" href="javascript:void(0);">
    <span class="text">Create</span>
  </button>
</template>

